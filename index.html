<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Black Death: A Survival Game (1347-1353)</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --parchment: #f4e8d0;
            --dark-parchment: #e8d9b8;
            --ink: #2c1810;
            --blood-red: #8b0000;
            --medieval-gold: #d4af37;
            --shadow: rgba(0, 0, 0, 0.3);
            --disease-color: #6b4423;
            --social-color: #4a5d23;
            --economic-color: #5d4a23;
        }

        body {
            font-family: 'IM Fell English', serif;
            background: linear-gradient(135deg, #3a2820 0%, #1a0f0a 100%);
            color: var(--ink);
            min-height: 100vh;
            padding: 20px;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(139, 0, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(212, 175, 55, 0.05) 0%, transparent 50%);
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: var(--parchment);
            border: 3px solid var(--ink);
            box-shadow: 0 10px 40px var(--shadow), inset 0 0 100px rgba(210, 180, 140, 0.3);
            position: relative;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(139, 69, 19, 0.03) 2px,
                rgba(139, 69, 19, 0.03) 3px
            );
            pointer-events: none;
        }

        header {
            background: linear-gradient(to bottom, var(--ink), #3a2820);
            padding: 30px;
            text-align: center;
            border-bottom: 5px double var(--medieval-gold);
            position: relative;
        }

        h1 {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            color: var(--medieval-gold);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .subtitle {
            color: var(--parchment);
            font-style: italic;
            font-size: 1.1rem;
        }

        .content {
            padding: 40px;
            position: relative;
        }

        .phase {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .phase.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            color: var(--blood-red);
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 2px solid var(--ink);
            padding-bottom: 10px;
        }

        .intro-text {
            line-height: 1.8;
            margin-bottom: 25px;
            font-size: 1.05rem;
            text-align: justify;
        }

        .selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }

        .selection-item {
            background: var(--dark-parchment);
            border: 2px solid var(--ink);
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .selection-item:hover {
            background: var(--parchment);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .selection-item.selected {
            background: var(--medieval-gold);
            border-color: var(--blood-red);
            border-width: 3px;
        }

        .item-name {
            font-family: 'Cinzel', serif;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: var(--blood-red);
        }

        .item-description {
            font-size: 0.9rem;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .item-benefits {
            font-size: 0.85rem;
            color: #2d5016;
            margin-bottom: 4px;
        }

        .item-drawbacks {
            font-size: 0.85rem;
            color: var(--blood-red);
        }

        .button {
            background: var(--blood-red);
            color: var(--parchment);
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            padding: 15px 40px;
            border: 3px solid var(--ink);
            cursor: pointer;
            display: block;
            margin: 30px auto;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .button:hover {
            background: var(--medieval-gold);
            color: var(--ink);
            transform: scale(1.05);
            box-shadow: 0 5px 20px var(--shadow);
        }

        .button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .counter {
            text-align: center;
            font-size: 1.1rem;
            margin: 15px 0;
            color: var(--blood-red);
            font-weight: 600;
        }

        .game-stats {
            background: var(--dark-parchment);
            border: 3px double var(--ink);
            padding: 20px;
            margin: 25px 0;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dotted var(--ink);
            align-items: flex-start;
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-label {
            font-weight: 600;
            color: var(--blood-red);
            min-width: 150px;
        }

        .stat-value {
            text-align: right;
            flex: 1;
        }

        .dice-container {
            text-align: center;
            margin: 30px 0;
        }

        .dice {
            font-size: 4rem;
            margin: 20px;
            display: inline-block;
            animation: roll 0.5s ease-in-out;
        }

        @keyframes roll {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
        }

        .scenario-box {
            background: var(--dark-parchment);
            border: 3px solid var(--ink);
            padding: 25px;
            margin: 25px 0;
        }

        .scenario-box.disease {
            border-color: var(--disease-color);
            background: #f5ebe0;
        }

        .scenario-box.social {
            border-color: var(--social-color);
            background: #eff5e0;
        }

        .scenario-box.economic {
            border-color: var(--economic-color);
            background: #f5f0e0;
        }

        .scenario-category {
            font-family: 'Cinzel', serif;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .scenario-category.disease { color: var(--disease-color); }
        .scenario-category.social { color: var(--social-color); }
        .scenario-category.economic { color: var(--economic-color); }

        .scenario-title {
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--ink);
        }

        .scenario-description {
            line-height: 1.7;
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .result-box {
            background: var(--dark-parchment);
            border: 3px solid var(--ink);
            padding: 25px;
            margin: 25px 0;
        }

        .result-box.survived {
            border-color: #2d5016;
            background: #d4edda;
        }

        .result-box.died {
            border-color: var(--blood-red);
            background: #f8d7da;
        }

        .result-title {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 15px;
        }

        .feedback {
            line-height: 1.8;
            margin: 15px 0;
        }

        .feedback-section {
            margin: 20px 0;
        }

        .feedback-section h3 {
            font-family: 'Cinzel', serif;
            color: var(--blood-red);
            margin-bottom: 10px;
        }

        .feedback-list {
            list-style: none;
            padding-left: 0;
        }

        .feedback-list li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            line-height: 1.6;
        }

        .feedback-list li::before {
            content: '⚔';
            position: absolute;
            left: 0;
        }

        .positive {
            color: #2d5016;
        }

        .negative {
            color: var(--blood-red);
        }

        .round-counter {
            text-align: center;
            font-size: 1.3rem;
            font-family: 'Cinzel', serif;
            color: var(--blood-red);
            margin: 20px 0;
        }

        .final-score {
            font-size: 1.5rem;
            text-align: center;
            margin: 20px 0;
            color: var(--blood-red);
            font-family: 'Cinzel', serif;
        }

        .decorative-border {
            border-top: 2px solid var(--ink);
            border-bottom: 2px solid var(--ink);
            padding: 15px 0;
            margin: 20px 0;
        }

        .bonus-breakdown {
            background: rgba(0, 0, 0, 0.05);
            padding: 15px;
            margin: 15px 0;
            border-left: 3px solid var(--ink);
        }

        .bonus-item {
            padding: 5px 0;
            font-size: 0.95rem;
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .content { padding: 20px; }
            .selection-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>⚔ The Black Death ⚔</h1>
            <p class="subtitle">A Survival Simulation: Europe 1347-1353</p>
        </header>

        <div class="content">
            <!-- Phase 1: Introduction -->
            <div id="phase-intro" class="phase active">
                <h2>The Year is 1347...</h2>
                <p class="intro-text">
                    The Black Death has arrived in Europe from the East, carried by merchant ships and spreading like wildfire through crowded cities and rural villages alike. This devastating plague will kill between 75 and 200 million people—nearly half of Europe's population. As a resident of medieval Europe, your survival depends on your knowledge, resources, and luck.
                </p>
                <p class="intro-text">
                    You must choose <strong>2 attributes</strong> that define your character and <strong>5 supplies</strong> to help you survive. However, each choice has both benefits and drawbacks. An attribute that helps you in one situation may doom you in another. You will face <strong>10 rounds</strong> of different scenarios across three categories: <strong>Disease</strong>, <strong>Social</strong>, and <strong>Economic</strong>.
                </p>
                <p class="intro-text">
                    Each round, you'll encounter a specific scenario, roll the dice, and your choices will either save you or seal your fate. Learn from each outcome to understand medieval survival.
                </p>
                <button class="button" onclick="startGame()">Begin Your Survival Journey</button>
            </div>

            <!-- Phase 2: Attribute Selection -->
            <div id="phase-attributes" class="phase">
                <h2>Choose Your Attributes</h2>
                <p class="intro-text">Select 2 attributes that define your character. Each attribute helps in certain scenarios but hurts in others. Choose strategically!</p>
                <div class="counter">Selected: <span id="attr-count">0</span>/2</div>
                <div class="selection-grid" id="attributes-grid"></div>
                <button class="button" id="attr-continue" onclick="continueToSupplies()" disabled>Continue to Supplies</button>
            </div>

            <!-- Phase 3: Supply Selection -->
            <div id="phase-supplies" class="phase">
                <h2>Choose Your Supplies</h2>
                <p class="intro-text">Select 5 supplies to aid your survival. Like attributes, each supply has advantages in certain situations and disadvantages in others.</p>
                <div class="counter">Selected: <span id="supply-count">0</span>/5</div>
                <div class="selection-grid" id="supplies-grid"></div>
                <button class="button" id="supply-continue" onclick="startRounds()" disabled>Begin the Plague Years</button>
            </div>

            <!-- Phase 4: Game Rounds -->
            <div id="phase-game" class="phase">
                <div class="round-counter">Round <span id="round-num">1</span> of 10</div>
                <div class="game-stats">
                    <div class="stat-row">
                        <span class="stat-label">Your Attributes:</span>
                        <span class="stat-value" id="display-attributes"></span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Your Supplies:</span>
                        <span class="stat-value" id="display-supplies"></span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Rounds Survived:</span>
                        <span class="stat-value" id="display-survived">0</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label">Total Score:</span>
                        <span class="stat-value" id="display-score">0</span>
                    </div>
                </div>
                <div id="round-content"></div>
            </div>

            <!-- Phase 5: Final Results -->
            <div id="phase-results" class="phase">
                <h2>Your Journey Through the Plague Years</h2>
                <div id="final-results"></div>
            </div>
        </div>
    </div>

    <script type="module" src="/src/main.js"></script>
</body>
</html>
